import{a as oe,e as ne}from"./chunk-BO4WVBIY.js";import{a as f}from"./chunk-CRQ2KSH2.js";import{b as $,e as E,g as z,i as W,j as J,k as K,l as Q,m as X,o as Y,p as v,q as k,r as Z,s as q,t as ee,u as te}from"./chunk-SUFPLXEP.js";import{E as b,Ga as h,R as j,T as C,Ta as G,Va as w,Y as I,Za as U,ba as c,bb as r,cb as a,db as p,ea as m,eb as V,fa as P,g as R,ib as B,j as H,jb as _,n as D,o as L,oa as N,pa as O,qb as y,rb as s,vb as l}from"./chunk-XKGJ2RL6.js";var ie=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=m({type:e,selectors:[["app-error"]],standalone:!0,features:[l],decls:2,vars:0,template:function(o,u){o&1&&(r(0,"p"),s(1,"error works!"),a())}});let t=e;return t})();var re=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=m({type:e,selectors:[["app-home"]],standalone:!0,features:[l],decls:3,vars:0,consts:[[1,""]],template:function(o,u){o&1&&(r(0,"div",0)(1,"p"),s(2,"Home Works!"),a()())}});let t=e;return t})();var ae=(t,e)=>{let d=c(f),n=c(v);return d.isLoggedIn()?!0:(alert("Please login, to access this page!"),n.navigate(["/login"]),!1)};var se=[{path:"home",component:re},{path:"plants",loadChildren:()=>import("./chunk-NLDQO3Z6.js").then(t=>t.PLANT_ROUTES),canActivate:[ae]},{path:"settings",loadComponent:()=>import("./chunk-QB7LCW4O.js").then(t=>t.SettingsComponent)},{path:"",redirectTo:"home",pathMatch:"full"},{path:"",loadChildren:()=>import("./chunk-KHUPCCJW.js").then(t=>t.AUTH_ROUTES)},{path:"error",component:ie},{path:"**",redirectTo:"error",pathMatch:"full"}];var me=new Map,pe=(t,e)=>{let d=c(f);if(t.method!=="GET"||!d.isLoggedIn())return e(t);let n=me.get(t.url);return n?D(n):e(t).pipe(C(o=>{o instanceof z&&me.set(t.url,o)}))};function le(t,e){return t.clone({setHeaders:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})}var ce=(t,e)=>{let d=c(f),n=c(v),o=!1,u=new H,T=u.asObservable(),A=()=>o?new R(i=>{T.subscribe(()=>{i.next(),i.complete()})}):(o=!0,d.refreshToken().pipe(C(i=>{o=!1,u.next(i)}),b(i=>{throw o=!1,i}))),S=(i,xe,Se)=>{if(i.status!==400){if(i.status===401)return A().pipe(j(x=>{let be=le(xe,x.access);return Se(be)}),b(x=>{if(x.status!==401)return S(x);throw d.logout(),n.navigate(["login"]),x}));if(i.status===403)throw i;if(i.status===500)throw i;if(i.status===503)throw i}return L(()=>i)},ge=d.getAccessToken(),F=le(t,ge);return e(F).pipe(b(i=>{switch(i.status){case 401:return console.error("401: Unallowed access!",i),S(i,F,e);default:return L(()=>i)}}))};var de={providers:[q(se,ee()),X(),W(K(),J([ce,pe]))]};var ue=(()=>{let e=class e{constructor(){}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=m({type:e,selectors:[["app-footer"]],standalone:!0,features:[l],decls:3,vars:0,consts:[[1,"border-top","text-center"]],template:function(o,u){o&1&&(r(0,"footer",0)(1,"p"),s(2,"Copyright \xA9 2024 Fictional Company, GmbH"),a()())}});let t=e;return t})();function we(t,e){if(t&1){let d=V();r(0,"button",8),B("click",function(){N(d);let o=_();return O(o.onLogout())}),s(1," Logout "),a()}}function ye(t,e){t&1&&(r(0,"button",9),s(1," Login "),a(),r(2,"button",10),s(3," Register "),a())}var fe=(()=>{let e=class e{constructor(){this.authService=c(f),this.router=c(v)}onLogout(){this.authService.logout().subscribe({next:()=>{alert("logged out"),this.router.navigate(["login"])},error:n=>{console.error("Logout failed:",n)}})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=m({type:e,selectors:[["app-header"]],standalone:!0,features:[l],decls:10,vars:1,consts:[[1,"p-3","text-bg-dark"],[1,"d-flex","flex-wrap","align-items-center","justify-content-center","justify-content-lg-start"],[1,"d-flex","text-white","text-decoration-none"],[1,"bi","bi-tree-fill","h1"],[1,"fs-2"],[1,"nav","col-12","col-lg-auto","me-lg-auto","mb-2","justify-content-center","mb-md-0"],[1,"text-end"],["type","button",1,"btn","btn-danger"],["type","button",1,"btn","btn-danger",3,"click"],["type","button","routerLink","/login",1,"btn","btn-outline-light","me-2"],["type","button","routerLink","/register",1,"btn","btn-warning"]],template:function(o,u){o&1&&(r(0,"header",0)(1,"div",1)(2,"a",2),p(3,"i",3),r(4,"span",4),s(5,"Planteria"),a()(),p(6,"ul",5),r(7,"div",6),G(8,we,2,0,"button",7)(9,ye,4,0),a()()()),o&2&&(h(8),U(8,u.authService.isLoggedIn()?8:9))},dependencies:[k]});let t=e;return t})();var M=(()=>{let e=class e{constructor(){this.isSidenavExpanded=!0,this.isSidenavElementExpanded=[!1,!1,!1]}toggleSidenav(){this.isSidenavExpanded=!this.isSidenavExpanded,console.log(this.isSidenavExpanded)}toggleSidenavElement(n){this.isSidenavElementExpanded[n]=!this.isSidenavElementExpanded[n],console.log(this.isSidenavElementExpanded)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=m({type:e,selectors:[["app-navbar"]],standalone:!0,features:[l],decls:19,vars:3,consts:[["isHome","routerLinkActive"],["isPlants","routerLinkActive"],["isSettings","routerLinkActive"],[1,"nav","flex-column","mb-auto","bg-dark","text-white","h-100"],[1,"nav","nav-pills","flex-column","mb-auto"],[1,"nav-item"],["routerLinkActive","active","routerLink","/home",1,"nav-link","text-white"],[1,"bi","me-2",3,"ngClass"],["routerLinkActive","active","routerLink","/plants",1,"nav-link","text-white"],["routerLinkActive","active","routerLink","/settings",1,"nav-link","text-white"],[1,"bg-light","border-top","text-center","py-2","mt-auto"]],template:function(o,u){if(o&1&&(r(0,"nav",3)(1,"ul",4)(2,"li",5)(3,"a",6,0),p(5,"i",7),s(6,"Home "),a()(),r(7,"li",5)(8,"a",8,1),p(10,"i",7),s(11,"Plants "),a()(),r(12,"li",5)(13,"a",9,2),p(15,"i",7),s(16,"Settings "),a()()()(),r(17,"footer",10),s(18,` Sidebar Footer
`),a()),o&2){let T=y(4),A=y(9),S=y(14);h(5),w("ngClass",T.isActive?"bi-house-door":"bi-house-door-fill"),h(5),w("ngClass",A.isActive?"bi-tree":"bi-tree-fill"),h(5),w("ngClass",S.isActive?"bi-gear":"bi-gear-fill")}},dependencies:[E,$,Z,k,ne]});let t=e;return t})();var he=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=P({type:e}),e.\u0275inj=I({providers:[oe],imports:[E,M]});let t=e;return t})();var ve=(()=>{let e=class e{constructor(){this.title="frontend"}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=m({type:e,selectors:[["app-root"]],standalone:!0,features:[l],decls:8,vars:0,consts:[[1,"container-fluid","d-flex","flex-column",2,"height","calc(100% - 3.25rem)"],[1,"row","flex-grow-1"],[1,"col-2","d-flex","flex-column"],[1,"col","flex-grow-1","d-flex","flex-column"],[1,"flex-grow-1","p-3"]],template:function(o,u){o&1&&(p(0,"app-header"),r(1,"div",0)(2,"div",1),p(3,"app-navbar",2),r(4,"div",3)(5,"main",4),p(6,"router-outlet"),a(),p(7,"app-footer"),a()()())},dependencies:[Y,he,M,ue,fe]});let t=e;return t})();te.production&&void 0;Q(ve,de).catch(t=>console.error(t));
